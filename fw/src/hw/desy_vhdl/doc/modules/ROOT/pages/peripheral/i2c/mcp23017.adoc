= MCP23017 FPGA Firmware Implementation

ifndef::imagesdir[:imagesdir: ../images]
:stem: asciimath

== General

Microchip MCP23017 is a 16-bit, general purpose parallel I/O expander for I2C bus applications. https://www.microchip.com/en-us/product/mcp23017[*^{counter:link}^*]. 

_FPGA FW GPIO-Configuration_:

* All 16 ports are inputs
* sequential addresses 
* incremental adress pointer

CAUTION: Device Measurement Configuration is fix set to X"00" 

== Prerequest for Design Integration

The FW Design of MCP23017 is ready to use together with the FW entity ENT_I2C_CONTROLLER. The MCP23017 component should be connected to the controller component. The controller converts the IC specific read and write commands to drive and scope the external MCP23017 device. Two iobuf primitives are required aditionally. See image below.

image::I2C_integration.png[]

== FPGA Firmware Design

This Firmware design implementation of MCP23017 operates as a I2C subordinate device. It is a costimized statemachine for sampling input sata.

_Biref description_:

* Trigger starts a single sampling process
** There is no termination condition apart from reset
** Data valid indicating that 16 ports been read
* Conversion time 1 ms

== Design Implementation 

image::mcp23017_fsm.svg[]